<!doctype html><html lang=en-us><head><meta charset=utf-8><title>How to use an external database with the FMR Docker image · sdmx.io</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="The FMR Docker image is self-contained and provides everything needed for a functional installation. However, some use cases require an external database for FMR's operational storage in preference to the MySQL service provided in the container. This article explains how."><meta name=author content="sdmx.io"><meta name=generator content="Hugo 0.104.3"><link rel=stylesheet href=/sdmxiopreview/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=/sdmxiopreview/plugins/slick/slick.css><link rel=stylesheet href=/sdmxiopreview/plugins/animate/animate.css><link rel=stylesheet href=/sdmxiopreview/plugins/venobox/venobox.css><link rel=stylesheet href=/sdmxiopreview/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=/sdmxiopreview/plugins/hightlight/syntax.css><link rel=stylesheet href=/sdmxiopreview/plugins/fontawesome/font-awesome.min.css><link rel=stylesheet href=/sdmxiopreview/plugins/tocbot/tocbot.css><link rel=stylesheet href=/sdmxiopreview/plugins/bigger-picture/bigger-picture.css><link rel=stylesheet href=/sdmxiopreview/plugins/fontawesome-pro-5.0.13/svg-with-js/css/fa-svg-with-js.css><link rel=stylesheet href=/sdmxiopreview/scss/style.css media=screen><link rel=icon href=/sdmxiopreview/favicon.png type=image/png><link rel=apple-touch-icon href=/sdmxiopreview/apple-touch-icon.png><link rel=apple-touch-icon sizes=57x57 href=images/favicon-57.png><link rel=apple-touch-icon sizes=72x72 href=images/favicon-72.png><link rel=apple-touch-icon sizes=114x114 href=images/favicon-114.png><link rel=apple-touch-icon sizes=144x144 href=images/favicon-144.png><link href=/opensearchdescription.xml rel=search title='Content search' type=application/opensearchdescription+xml><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="sdmx.io"><meta name=twitter:creator content="@sdmx.io"><meta property="og:url" content="https://metadatatechnology.github.io/sdmxiopreview/blog/how-to-use-an-external-database-with-fmr-docker/"><meta property="og:title" content="How to use an external database with the FMR Docker image"><meta property="twitter:title" content="How to use an external database with the FMR Docker image"><meta property="og:description" content="The FMR Docker image is self-contained and provides everything needed for a functional installation. However, some use cases require an external database for FMR's operational storage in preference to the MySQL service provided in the container. This article explains how."><meta property="twitter:description" content="The FMR Docker image is self-contained and provides everything needed for a functional installation. However, some use cases require an external database for FMR's operational storage in preference to the MySQL service provided in the container. This article explains how."><meta property="og:image" content="https://metadatatechnology.github.io/sdmxiopreview/images/posts/docker-logo.png"><meta property="twitter:image" content="https://metadatatechnology.github.io/sdmxiopreview/images/posts/docker-logo.png"></head><body><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden=true></i></button><header class="fixed-top header"><div class="top-header py-2 bg-white"><div class=container><div class="row no-gutters align-items-center"><div class="col-12 text-center"><ul class=list-inline><li class=list-inline-item><a href=https://www.surveymonkey.co.uk/r/S5BMYJQ title="Take the 2022 SDMX tools user survey" target=_blank rel=noopener>Take the 2022 SDMX tools user survey</a></li></ul></div></div></div></div><div class="navigation w-100 top-hider"><div class=container><nav class="navbar navbar-expand-lg navbar-light p-0"><div style=min-width:300px;max-height:100px;overflow:visible><a class="navbar-brand d-none d-lg-block" href=/sdmxiopreview><img class=img-fluid width=140px style=z-index:100;position:relative src=/sdmxiopreview/images/Kraken_v03.svg alt=Home><span style=color:#fff;font-family:sans-serif;font-weight:800;font-size:2rem;padding-left:10px>sdmx.io</span></a>
<a class="navbar-brand d-lg-none" href=/sdmxiopreview><span style=color:#fff;font-family:sans-serif;font-weight:800;font-size:2rem;padding-left:10px>sdmx.io</span></a></div><button class="navbar-toggler rounded-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu><a class=dropdown-item href=/sdmxiopreview/about>ABOUT SDMX.IO</a>
<a class=dropdown-item href=/sdmxiopreview/governance>GOVERNANCE</a>
<a class=dropdown-item href=/sdmxiopreview/partner>PARTNERS</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Ecosystem</a><div class=dropdown-menu><a class=dropdown-item href=/sdmxiopreview/ecosystem>TOOLS ECOSYSTEM</a>
<a class=dropdown-item href=/sdmxiopreview/fmr>FUSION METADATA REGISTRY</a></div></li><li class=nav-item><a class=nav-link href=/sdmxiopreview/event>Events</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Resources</a><div class=dropdown-menu><a class=dropdown-item href=/sdmxiopreview/download>DOWNLOADS</a>
<a class=dropdown-item href=/sdmxiopreview/containers>CONTAINERISED ENVIRONMENTS</a>
<a class=dropdown-item href=/sdmxiopreview/learn>LEARNING RESOURCES</a>
<a class=dropdown-item href=/sdmxiopreview/blog>ARTICLES</a></div></li><li class=nav-item><a class=nav-link href=/sdmxiopreview/notice>Notices</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Help</a><div class=dropdown-menu><a class=dropdown-item href=https://github.com/glennmdt/sdmxio/issues>RAISE AN ISSUE ON GITHUB</a></div></li><li class=nav-item><a class=nav-link href=/sdmxiopreview/contact>Contact</a></li></ul></div></nav></div></div></header><section class="bg-cover page-title-section overlay" style=background-image:url(/sdmxiopreview/images/backgrounds/page-title.webp),url(/sdmxiopreview/images/backgrounds/page-title.webp)><div class=container><div class=row><div class=col-md-8><ul class="list-inline custom-breadcrumb"><li class="list-inline-item h2"><a class="text-white font-secondary" href=/sdmxiopreview/blog>Articles</a></li><li class=list-inline-item><i class="ti-angle-right text-white"></i></li><li class="list-inline-item text-white h2 font-secondary">How to Use an External Database With the FMR Docker Image</li></ul><p class=text-white>The FMR Docker image is self-contained and provides everything needed for a functional installation. However, some use cases require an external database for FMR&rsquo;s operational storage in preference to the MySQL service provided in the container. This article explains how.</p></div></div></div></section><section class=section-sm><div class="container blog"><div class=row><div class="col-lg-8 article-content"><div class=row><div class=col-12><ul class=list-inline><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Author
:</span>BIS</li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Category
:</span><a href=/sdmxiopreview/categories/fmr>
FMR</a></li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Word Count
:</span>695 words</li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Reading Time
:</span>3 Minute</li></ul></div><div class="col-12 my-4"><div class=border-bottom></div></div><div class="col-12 content"><p>The standard <a href=https://hub.docker.com/r/metadatatechnology/fmr-mysql title="FMR Docker image" target=_blank rel=noopener>FMR Docker image</a>
is self contained in that includes everything needed to run a light-weight installation suitable for testing, personal use and light production workloads. But what happens if you want to use a database service external to the container? - SQL Server or Oracle for instance. This article explains how.</p><h2 id=about-fmrs-operating-database>About FMR&rsquo;s operating database</h2><p>Just as a bit of background, FMR uses a SQL database for its operational storage - that is:</p><ul><li>structural metadata content</li><li>settings and configuration information</li><li>audits and transaction history</li></ul><p>MySQL (5.7 and 8) is mature and free making it a good choice for many use cases. But FMR also supports Oracle (12c and 19c), Microsoft SQL Server and MariaDB.</p><p>During FMR installation, the database service and schema are defined either as a direct (JDBC) connection, or from FMR 11 by choosing a JNDI data source that must be pre-configured in the Java web application server.</p><p>When using the FMR Docker image, the installation phase has already been completed and the operating database set to the MySQL service internal to the container. However, that can be changed as explained in the following section.</p><h2 id=changing-the-fmr-docker-database>Changing the FMR Docker database</h2><h3 id=save-existing-structural-metadata-content>Save existing structural metadata content</h3><p>If you already have structural metadata in the container&rsquo;s MySQL database, save it by exporting to file so that it can be reloaded when the new database is connected.</p><p>Log in as the root user:</p><ol><li>From <code>Export Structures</code> in the menu bar, choose <strong>All Structures</strong>. A Download Structures popup should appear.</li><li>Choose <code>FUSION-JSON</code> from the list of formats, and check all of the boxes (Compress returned data etc)</li><li>Choose <code>Download</code> to download all of the structures to a ZIP file which needs to be saved for later use.</li></ol><h3 id=create-a-new-schema-on-the-external-database-service>Create a new schema on the external database service</h3><p>FMR creates its own tables, but needs an empty schema (or &lsquo;database&rsquo; depending on the terminology your database product uses). Create that and also a user account with privileges sufficient to create, modify and drop tables, insert, update and delete data. It&rsquo;s this account that FMR will use to access the schema.</p><h3 id=change-fmrs-database-settings>Change FMR&rsquo;s database settings</h3><p>Back in your running FMR Docker container&mldr;</p><p>Log in as the root user:</p><ol><li>Choose <code>Settings</code> > <code>Database settings</code> from the menu bar. The current database settings reference the interal MySQL service so have:</li></ol><pre tabindex=0><code>Database Type = MySQL
Server = Localhost
Port = 3306
Schema = fmr
UserId = fmr_user
</code></pre><ol start=2><li>Choose the type of the external database service.<br>For complex environments such as Oracle configured for HA-failover, choose <code>Custom</code> which allows a custom connection string to be set. For most other use cases, the standard <code>MySQL</code>, <code>Oracle</code> or <code>SQL Server</code> configurations should be sufficient. Choose <code>MySQL</code> for MariaDB. The <code>JNDI</code> option requires manual modifications to the Docker container&rsquo;s Apache Tomcat configuration and for that reason it&rsquo;s not recommended unless you have a specific use case.</li><li>Set the database server hostname and port. The Docker container should inherit the DNS configuration from the host platform allowing a hostname to be used. If there are connection problems, try substituing the IP address instead.</li><li>Set the schema, user ID and user password.</li><li>Apply settings.</li></ol><figure class="mx-auto text-center"><img src=fmr_oracle_config.jpg loading=lazy decoding=async width=80% data-img=fmr_oracle_config.jpg data-caption data-width=1263 data-height=650></figure><h3 id=check-the-new-database-connection-is-working>Check the new database connection is working</h3><p>A &lsquo;Database Updated&rsquo; message means a connection has been made successfully and FMR will reload its working environment from that database.</p><p>The most common source of failure is problems communicating with the external database service. The error report explains more:</p><figure class="mx-auto text-center"><img src=fmr_database_comms_failure.jpg loading=lazy decoding=async width=80% data-img=fmr_database_comms_failure.jpg data-caption data-width=1827 data-height=395></figure><h3 id=recreate-settings-and-reload-any-saved-structural-metadata>Recreate settings, and reload any saved structural metadata</h3><p>Settings such as Active Directory configuration and appearance aren&rsquo;t exported with the structural metadata so will need to be recreated manually.</p><p>If structural metadata was exported in the first step, that can now be reloaded.</p><p>Log in as the root user:</p><ol><li>Choose <code>Load Structures</code> from the FMR home page.</li><li>Choose the File option and locate the file saved in the first step.</li><li>For the Action choose <code>Replace</code> and click <code>Import Content</code>.</li></ol><h2 id=summary>Summary</h2><p>The MySQL database service integrated with the standard FMR Docker image is convenient and suitable for many purposes, but some use cases demand a service external to the container is used. That&rsquo;s possible by simply changing the the database connection details through the web user interface.</p></div><div class="col-12 mb-4"><div class=border-bottom></div></div><div class=col-12><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><a href=/sdmxiopreview/tags/fmr class=badge>FMR</a>
<a href=/sdmxiopreview/tags/docker class=badge>Docker</a>
<a href=/sdmxiopreview/tags/installation class=badge>Installation</a>
<a href=/sdmxiopreview/tags/administration class=badge>Administration</a></li></div><div class=col-12><ul class="pager blog-pager"><li class=next><a href=https://metadatatechnology.github.io/sdmxiopreview/blog/balance-equality-validation-rules-using-hcl/ data-toggle=tooltip data-placement=top title="Creating balance equality validation rules using hierarical codelists in FMR">Next Post &rarr;</a></li></ul></div><div class=col-12></div></div></div><aside class="col-lg-4 sidebar"><div class="bg-white mb-4"><p class=sidebar-title>Categories</p><ul class=list-unstyled><li class=border-bottom><a href=/sdmxiopreview/categories/fmr class="d-block pb-3 mt-3">FMR</a></li></ul></div><div class=bg-white><p class=sidebar-title>Tags</p><div id=tag-cloud><a href=/sdmxiopreview/tags/administration style=font-size:.8rem>[ADMINISTRATION]</a>
<a href=/sdmxiopreview/tags/docker style=font-size:.8rem>[DOCKER]</a>
<a href=/sdmxiopreview/tags/fmr style=font-size:1.557115704285749rem>[FMR]</a>
<a href=/sdmxiopreview/tags/hierarchies style=font-size:.8rem>[HIERARCHIES]</a>
<a href=/sdmxiopreview/tags/installation style=font-size:.8rem>[INSTALLATION]</a>
<a href=/sdmxiopreview/tags/validation style=font-size:.8rem>[VALIDATION]</a></div></div><div class="bg-white py-4 box-shadow mb-4 sticky-top aside-toc d-none d-sm-block"><p class=sidebar-title>Table of content</p><nav id=TableOfContents><ul><li><a href=#about-fmrs-operating-database>About FMR&rsquo;s operating database</a></li><li><a href=#changing-the-fmr-docker-database>Changing the FMR Docker database</a><ul><li><a href=#save-existing-structural-metadata-content>Save existing structural metadata content</a></li><li><a href=#create-a-new-schema-on-the-external-database-service>Create a new schema on the external database service</a></li><li><a href=#change-fmrs-database-settings>Change FMR&rsquo;s database settings</a></li><li><a href=#check-the-new-database-connection-is-working>Check the new database connection is working</a></li><li><a href=#recreate-settings-and-reload-any-saved-structural-metadata>Recreate settings, and reload any saved structural metadata</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div></aside></div></div></section><footer><div class="footer bg-footer section-sm border-bottom"><div class=container><div class=row><div class="col-lg-4 col-sm-8 mb-2 mb-lg-0"><h5 class="text-white mb-2"></h5><ul class=list-unstyled></ul><div class=mb-2><a href=https://twitter.com/sdmxio target=_blank><i class="fab fa-twitter mr-3" style=font-size:1.5rem;color:#fff></i></a>
<a href=https://sdmxio.github.com target=_blank><i class="fab fa-github mr-3" style=font-size:1.5rem;color:#fff></i></a></div><div><a href=/sdmxiopreview/comms/signup><i class="fas fa-envelope" style=font-size:1.5rem;color:#fff></i></a> <small class=ml-2 style=color:#fff>signup to receive email alerts</small></div></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-2 mb-md-0"><h5 class="text-white mb-2">Policy</h5><ul class=list-unstyled><small><li class=mb-1><a class=text-color href=/sdmxiopreview/policy/privacy/>Privacy</a></li></small></ul></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-2 mb-md-0"><h5 class="text-white mb-2">Links</h5><ul class=list-unstyled><small><li class=mb-1><a class=text-color href=https://www.bis.org/innovation/bis_open_tech_sdmx.htm target=_blank rel=noopener>BIS Open Tech</a></li></small><small><li class=mb-1><a class=text-color href=https://sdmx.org target=_blank rel=noopener>SDMX official website</a></li></small><small><li class=mb-1><a class=text-color href=https://registry.sdmx.org target=_blank rel=noopener>SDMX Global Registry</a></li></small><small><li class=mb-1><a class=text-color href=https://github.com/sdmx-twg/sdmx-rest/tree/v1.5.0 target=_blank rel=noopener>SDMX REST v1 GitHub</a></li></small><small><li class=mb-1><a class=text-color href=https://github.com/sdmx-twg/sdmx-rest target=_blank rel=noopener>SDMX REST v2 GitHub</a></li></small></ul></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-2 mb-md-0"><h5 class="text-white mb-2">Notices</h5><ul class=list-unstyled><small><li class=mb-1><a class=text-color href=/sdmxiopreview/notice/fmr-11.3.0-release/>FMR 11.3.0 release</a></li></small><small><li class=mb-1><a class=text-color href=/sdmxiopreview/notice/fmr-11.2.1-release/>FMR 11.2.1 release</a></li></small><small><li class=mb-1><a class=text-color href=/sdmxiopreview/notice/fmr-11.2.0-release/>FMR 11.2.0 release</a></li></small></ul></div></div></div></div><div class="copyright py-4 bg-footer"><div class=container><div class=row><div class="col-sm-9 text-sm-left text-center"><p class="mb-0 text-color small">© 2022 Bank for International Settlements. All Rights Reserved.</p></div><div class="col-sm-3 text-sm-right text-center"><ul class=list-inline></ul></div></div></div></div></footer><script src=/sdmxiopreview/plugins/jQuery/jquery.min.js></script>
<script src=/sdmxiopreview/plugins/bootstrap/bootstrap.min.js></script>
<script src=/sdmxiopreview/plugins/slick/slick.min.js></script>
<script src=/sdmxiopreview/plugins/venobox/venobox.min.js></script>
<script src=/sdmxiopreview/plugins/filterizr/jquery.filterizr.min.js></script>
<script src=/sdmxiopreview/plugins/search/fuse.min.js></script>
<script src=/sdmxiopreview/plugins/search/mark.js></script>
<script src=/sdmxiopreview/plugins/search/search.js></script>
<script src=/sdmxiopreview/plugins/hex_md5/hex_md5.js></script>
<script src=/sdmxiopreview/plugins/anchor/anchor.min.js></script>
<script src=/sdmxiopreview/plugins/tocbot/tocbot.min.js></script>
<script src=/sdmxiopreview/plugins/bigger-picture/bigger-picture.min.js></script>
<script src=/sdmxiopreview/plugins/fontawesome-pro-5.0.13/svg-with-js/js/fontawesome-all.min.js></script>
<script src=/sdmxiopreview/js/script.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.js></script>
<script>docsearch({apiKey:"xx",indexName:"DocSearch",appId:"xx",inputSelector:"#js-algolia-btn",debug:!1})</script><script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script>anchors.add()</script><script>tocbot.init({tocSelector:"#TableOfContents",contentSelector:".content",headingSelector:"h1, h2, h3, h4",hasInnerContainers:!1,collapseDepth:3})</script></body></html>